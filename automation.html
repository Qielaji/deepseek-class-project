<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自动化公式计算 - 智能计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
        }
        
        .formula-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .formula-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .formula-card.active {
            background: rgba(33, 150, 243, 0.2);
            border-color: rgba(33, 150, 243, 0.5);
        }
        
        .formula-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
        }
        
        .formula-equation {
            font-size: 1.1rem;
            color: #4caf50;
            font-family: 'Courier New', monospace;
            margin-bottom: 12px;
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .formula-description {
            color: #b0b0b0;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .calculation-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 24px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            color: #e0e0e0;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .input-field {
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            color: #ffffff;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }
        
        .input-field::placeholder {
            color: #808080;
        }
        
        .unit-select {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            color: #ffffff;
            font-size: 1rem;
            width: 100%;
            cursor: pointer;
        }
        
        .calculate-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            border: none;
            border-radius: 16px;
            color: white;
            padding: 18px 32px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
            width: 100%;
            margin-top: 24px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(76, 175, 80, 0.4);
        }
        
        .result-display {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
            text-align: center;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }
        
        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4caf50;
            font-family: 'Courier New', monospace;
            margin-bottom: 8px;
        }
        
        .result-unit {
            font-size: 1.1rem;
            color: #b0b0b0;
            font-weight: 500;
        }
        
        .nav-bar {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 12px;
            margin-bottom: 32px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .nav-link {
            color: #e0e0e0;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }
        
        .nav-link.active {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
        }
        
        .hero-section {
            text-align: center;
            padding: 40px 0;
            background: url('resources/automation-bg.jpg') center/cover;
            border-radius: 20px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 26, 46, 0.7);
            z-index: 1;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .hero-subtitle {
            font-size: 1.1rem;
            color: #b0b0b0;
            font-weight: 300;
        }
        
        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        @media (max-width: 640px) {
            .formula-grid {
                grid-template-columns: 1fr;
            }
            
            .hero-title {
                font-size: 2rem;
            }
            
            .result-value {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">自动化公式计算</h1>
                <p class="hero-subtitle">工程自动化常用公式快速计算工具</p>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav-bar">
            <div class="flex justify-center space-x-4">
                <a href="index.html" class="nav-link">基本计算器</a>
                <a href="scientific.html" class="nav-link">科学计算器</a>
                <a href="automation.html" class="nav-link active">自动化公式</a>
            </div>
        </nav>

        <!-- Formula Selection -->
        <div class="formula-grid" id="formulaGrid">
            <div class="formula-card" data-formula="ohm">
                <div class="formula-title">欧姆定律</div>
                <div class="formula-equation">V = I × R</div>
                <div class="formula-description">计算电压、电流或电阻值，适用于直流电路分析</div>
            </div>

            <div class="formula-card" data-formula="power">
                <div class="formula-title">功率计算</div>
                <div class="formula-equation">P = V × I</div>
                <div class="formula-description">计算电路功率，适用于电气设备功率分析</div>
            </div>

            <div class="formula-card" data-formula="resistance">
                <div class="formula-title">电阻计算</div>
                <div class="formula-equation">R = V / I</div>
                <div class="formula-description">根据电压和电流计算电阻值</div>
            </div>

            <div class="formula-card" data-formula="lc-resonance">
                <div class="formula-title">LC谐振频率</div>
                <div class="formula-equation">f = 1 / (2π√LC)</div>
                <div class="formula-description">计算LC电路的谐振频率，适用于滤波器设计</div>
            </div>

            <div class="formula-card" data-formula="motor-rpm">
                <div class="formula-title">电机转速</div>
                <div class="formula-equation">RPM = (f × 60) / p</div>
                <div class="formula-description">计算交流电机转速，f为频率，p为极对数</div>
            </div>

            <div class="formula-card" data-formula="unit-conversion">
                <div class="formula-title">单位换算</div>
                <div class="formula-equation">多种单位转换</div>
                <div class="formula-description">长度、重量、温度、压力等常用单位换算</div>
            </div>
        </div>

        <!-- Calculation Panel -->
        <div class="calculation-panel" id="calculationPanel" style="display: none;">
            <h2 class="text-2xl font-bold text-white mb-6" id="panelTitle">选择公式进行计算</h2>
            
            <div id="formulaInputs">
                <!-- Dynamic inputs will be generated here -->
            </div>

            <button class="calculate-btn" onclick="calculateFormula()">计算结果</button>

            <div class="result-display" id="resultDisplay" style="display: none;">
                <div class="result-value" id="resultValue">0</div>
                <div class="result-unit" id="resultUnit">单位</div>
            </div>
        </div>
    </div>

    <script>
        let currentFormula = null;
        let angleMode = 'degree';

        // Formula definitions
        const formulas = {
            'ohm': {
                title: '欧姆定律计算',
                inputs: [
                    { name: 'voltage', label: '电压 (V)', unit: 'V', placeholder: '请输入电压值' },
                    { name: 'current', label: '电流 (I)', unit: 'A', placeholder: '请输入电流值' },
                    { name: 'resistance', label: '电阻 (R)', unit: 'Ω', placeholder: '请输入电阻值' }
                ],
                calculate: (values) => {
                    const V = parseFloat(values.voltage);
                    const I = parseFloat(values.current);
                    const R = parseFloat(values.resistance);
                    
                    if (!isNaN(V) && !isNaN(I)) {
                        return { value: V / I, unit: 'Ω', label: '电阻' };
                    } else if (!isNaN(V) && !isNaN(R)) {
                        return { value: V / R, unit: 'A', label: '电流' };
                    } else if (!isNaN(I) && !isNaN(R)) {
                        return { value: I * R, unit: 'V', label: '电压' };
                    }
                    return null;
                }
            },
            'power': {
                title: '功率计算',
                inputs: [
                    { name: 'voltage', label: '电压 (V)', unit: 'V', placeholder: '请输入电压值' },
                    { name: 'current', label: '电流 (I)', unit: 'A', placeholder: '请输入电流值' },
                    { name: 'power', label: '功率 (P)', unit: 'W', placeholder: '请输入功率值' }
                ],
                calculate: (values) => {
                    const V = parseFloat(values.voltage);
                    const I = parseFloat(values.current);
                    const P = parseFloat(values.power);
                    
                    if (!isNaN(V) && !isNaN(I)) {
                        return { value: V * I, unit: 'W', label: '功率' };
                    } else if (!isNaN(P) && !isNaN(V)) {
                        return { value: P / V, unit: 'A', label: '电流' };
                    } else if (!isNaN(P) && !isNaN(I)) {
                        return { value: P / I, unit: 'V', label: '电压' };
                    }
                    return null;
                }
            },
            'resistance': {
                title: '电阻计算',
                inputs: [
                    { name: 'voltage', label: '电压 (V)', unit: 'V', placeholder: '请输入电压值' },
                    { name: 'current', label: '电流 (I)', unit: 'A', placeholder: '请输入电流值' }
                ],
                calculate: (values) => {
                    const V = parseFloat(values.voltage);
                    const I = parseFloat(values.current);
                    
                    if (!isNaN(V) && !isNaN(I) && I !== 0) {
                        return { value: V / I, unit: 'Ω', label: '电阻' };
                    }
                    return null;
                }
            },
            'lc-resonance': {
                title: 'LC谐振频率计算',
                inputs: [
                    { name: 'inductance', label: '电感 (L)', unit: 'H', placeholder: '请输入电感值' },
                    { name: 'capacitance', label: '电容 (C)', unit: 'F', placeholder: '请输入电容值' }
                ],
                calculate: (values) => {
                    const L = parseFloat(values.inductance);
                    const C = parseFloat(values.capacitance);
                    
                    if (!isNaN(L) && !isNaN(C) && L > 0 && C > 0) {
                        const frequency = 1 / (2 * Math.PI * Math.sqrt(L * C));
                        return { value: frequency, unit: 'Hz', label: '谐振频率' };
                    }
                    return null;
                }
            },
            'motor-rpm': {
                title: '电机转速计算',
                inputs: [
                    { name: 'frequency', label: '频率 (f)', unit: 'Hz', placeholder: '请输入电源频率' },
                    { name: 'poles', label: '极对数 (p)', unit: '对', placeholder: '请输入电机极对数' }
                ],
                calculate: (values) => {
                    const f = parseFloat(values.frequency);
                    const p = parseFloat(values.poles);
                    
                    if (!isNaN(f) && !isNaN(p) && p > 0) {
                        const rpm = (f * 60) / p;
                        return { value: rpm, unit: 'RPM', label: '电机转速' };
                    }
                    return null;
                }
            },
            'unit-conversion': {
                title: '单位换算',
                inputs: [
                    { name: 'value', label: '数值', unit: '', placeholder: '请输入要转换的数值' },
                    { name: 'fromUnit', label: '从单位', unit: '', type: 'select', options: [
                        { value: 'm', label: '米 (m)' },
                        { value: 'cm', label: '厘米 (cm)' },
                        { value: 'mm', label: '毫米 (mm)' },
                        { value: 'km', label: '千米 (km)' },
                        { value: 'in', label: '英寸 (in)' },
                        { value: 'ft', label: '英尺 (ft)' }
                    ]},
                    { name: 'toUnit', label: '到单位', unit: '', type: 'select', options: [
                        { value: 'm', label: '米 (m)' },
                        { value: 'cm', label: '厘米 (cm)' },
                        { value: 'mm', label: '毫米 (mm)' },
                        { value: 'km', label: '千米 (km)' },
                        { value: 'in', label: '英寸 (in)' },
                        { value: 'ft', label: '英尺 (ft)' }
                    ]}
                ],
                calculate: (values) => {
                    const val = parseFloat(values.value);
                    const from = values.fromUnit;
                    const to = values.toUnit;
                    
                    if (!isNaN(val)) {
                        // Convert to meters first
                        let meters = 0;
                        switch(from) {
                            case 'm': meters = val; break;
                            case 'cm': meters = val / 100; break;
                            case 'mm': meters = val / 1000; break;
                            case 'km': meters = val * 1000; break;
                            case 'in': meters = val * 0.0254; break;
                            case 'ft': meters = val * 0.3048; break;
                        }
                        
                        // Convert from meters to target unit
                        let result = 0;
                        switch(to) {
                            case 'm': result = meters; break;
                            case 'cm': result = meters * 100; break;
                            case 'mm': result = meters * 1000; break;
                            case 'km': result = meters / 1000; break;
                            case 'in': result = meters / 0.0254; break;
                            case 'ft': result = meters / 0.3048; break;
                        }
                        
                        return { value: result, unit: to, label: '转换结果' };
                    }
                    return null;
                }
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupFormulaSelection();
            animatePageLoad();
        });

        // Setup formula selection
        function setupFormulaSelection() {
            const formulaCards = document.querySelectorAll('.formula-card');
            formulaCards.forEach(card => {
                card.addEventListener('click', function() {
                    const formulaKey = this.dataset.formula;
                    selectFormula(formulaKey);
                    
                    // Update active state
                    formulaCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Select formula
        function selectFormula(formulaKey) {
            currentFormula = formulaKey;
            const formula = formulas[formulaKey];
            
            if (!formula) return;
            
            // Show calculation panel
            const panel = document.getElementById('calculationPanel');
            const title = document.getElementById('panelTitle');
            const inputsContainer = document.getElementById('formulaInputs');
            
            title.textContent = formula.title;
            
            // Generate input fields
            inputsContainer.innerHTML = formula.inputs.map(input => {
                if (input.type === 'select') {
                    return `
                        <div class="input-group">
                            <label class="input-label">${input.label}</label>
                            <select class="unit-select" name="${input.name}">
                                ${input.options.map(option => 
                                    `<option value="${option.value}">${option.label}</option>`
                                ).join('')}
                            </select>
                        </div>
                    `;
                } else {
                    return `
                        <div class="input-group">
                            <label class="input-label">${input.label}</label>
                            <input type="number" class="input-field" name="${input.name}" 
                                   placeholder="${input.placeholder}" step="any">
                        </div>
                    `;
                }
            }).join('');
            
            // Hide result display
            document.getElementById('resultDisplay').style.display = 'none';
            
            // Show panel
            panel.style.display = 'block';
            
            // Animate panel appearance
            anime({
                targets: panel,
                translateY: [30, 0],
                opacity: [0, 1],
                duration: 500,
                easing: 'easeOutExpo'
            });
        }

        // Calculate formula
        function calculateFormula() {
            if (!currentFormula) return;
            
            const formula = formulas[currentFormula];
            const inputs = document.querySelectorAll('#formulaInputs input, #formulaInputs select');
            const values = {};
            
            // Collect input values
            inputs.forEach(input => {
                values[input.name] = input.value;
            });
            
            // Calculate result
            const result = formula.calculate(values);
            
            if (result) {
                const resultDisplay = document.getElementById('resultDisplay');
                const resultValue = document.getElementById('resultValue');
                const resultUnit = document.getElementById('resultUnit');
                
                resultValue.textContent = result.value.toFixed(6).replace(/\.?0+$/, '');
                resultUnit.textContent = `${result.label}: ${result.unit}`;
                
                resultDisplay.style.display = 'block';
                
                // Animate result
                anime({
                    targets: resultDisplay,
                    scale: [0.9, 1],
                    opacity: [0, 1],
                    duration: 500,
                    easing: 'easeOutElastic(1, .8)'
                });
                
                anime({
                    targets: resultValue,
                    scale: [1, 1.1, 1],
                    color: ['#4caf50', '#66bb6a', '#4caf50'],
                    duration: 800,
                    easing: 'easeOutQuad'
                });
            } else {
                alert('请输入有效的数值');
            }
        }

        // Animate page load
        function animatePageLoad() {
            anime({
                targets: '.formula-card',
                translateY: [50, 0],
                opacity: [0, 1],
                delay: anime.stagger(100),
                duration: 600,
                easing: 'easeOutExpo'
            });
        }
    </script>
</body>
</html>